#T200 #系统架构设计 #数据库 #DEV 
# 关系型数据库范式设计
## 概述
关系数据库中的关系必须满足一定的要求，即满足不同的范式。
关系[数据](https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE/33305?fromModule=lemma_inlink)库有六种范式：第一范式（1NF）、第二范式（2NF）、第三范式（3NF）、巴德斯科范式（BCNF）、第四范式（4NF）和第五范式（5NF）。满足最低要求的范式是第一范式（1NF）。在第一范式的基础上进一步满足更多要求的称为第二范式（2NF），其余范式以次类推。一般说来，数据库只需满足第三范式（3NF）就行了。
设计[关系型数据库](https://baike.baidu.com/item/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93/8999831?fromModule=lemma_inlink)时，遵从不同的规范要求，设计出合理的关系型数据库。这些规范被称作范式。越高的范式数据库的**冗余度就越低。** [1]

数据库的设计范式是数据库设计所需要满足的规范，数据库的规范化是指把数据库中的数据按照一定方式优化，这样使数据更明确，更简洁。是“广大劳动人民”在实践经验中的总结。
通常糟糕的数据库设计会让数据库表产生插入/删除/更新异常，给数据库维护带来极大的麻烦。
总体来看，数据库范式有：1NF，2NF，3NF，BCNF，4NF，5NF，DKNF，6NF。通常所用到的只是前三个范式，即：第一范式(1NF)，第二范式(2NF)，第三范式(3NF)。

^c5f5fa

## 1NF 第一范式

**定义： 数据库表中的字段都是单一属性的，不可再分的。** 
简单的说，每一个属性都是原子项，不可分割。这个单一属性是由基本的数据类型所构成的，如整数、浮点数、字符串等。
换句话说：**第一范式要求数据库中的表都是二维表！**

例如：学生表中，有学号，姓名，联系方式，这个联系方式就不满足1NF，因为联系方式还可以拆分为手机号，座机电话，甚至可以有即时通讯，当然具体应根据实际情况来进行设计，例如联系方式只有手机号，就可以将字段名改成手机号。

## 2NF 第二范式

**定义：数据库中的表中不存在非关键字段对任一候选关键字段的部分函数依赖。** 
第二范式(2NF)要求实体的属性完全依赖于主关键字。
所谓完全依赖是指不能存在仅依赖主关键字一部分的属性，如果存在，那么这个属性和主关键字的这一部分应该分离出来形成一个新的实体，新实体与原实体之间是一对多的关系。
为实现区分通常需要为表加上一个列，以存储各个实例的唯一标识。简而言之，第二范式就是在第一范式的基础上属性完全依赖于主键。

|科目|授课教师|学生|分数|
|---|---|---|---|
|语文|李老师|张三|90|
|数学|张老师|李四|80|

从上面的学生成绩表可以看出，授课教师和学生都依赖于考试科目，而分数却依赖于考试科目和学生的组合。所以，分数对考试科目存在着部分依赖。不符合第二范式。通常我们需要为表增加一列，即主键列，让所有属性列都完全依赖于主键列。

|成绩编号|科目|授课教师|学生|分数|
|---|---|---|---|---|
|1|语文|李老师|张三|90|
|2|数学|张老师|李四|80|


## 3NF 第三范式

**定义：如果数据表中不存在非关键字对候选关键字段的传递函数依赖，则符合第三范式。** 第三范式是在第一和第二范式的基础之上提出的，是第二范式的扩展，换句话说，第三范式必须完全依赖于关键字段，不能存在于传递函数依赖。

**举个例子：**
比如第二范式里面的这张学生成绩表：
|成绩编号|科目|授课教师|学生|分数|
|---|---|---|---|---|
|1|语文|李老师|张三|90|
|2|数学|张老师|李四|80|

仔细分析会发现，科目，学生和分数都完全依赖于成绩编号，但是授课教师却依赖于科目，即存在传递依赖：授课教师>科目>成绩编号。对于这种情况，通常将依赖传递的字段新建一张表。如下：

|编号|科目编号|学生|分数|
|---|---|---|---|
|1|1001|张三|90|
|2|1002|李四|80|

|科目编号|授课教师|科目名称|
|---|---|---|
|1001|李老师|语文|
|1002|张老师|数学|
